<!DOCTYPE html>
<head>
   <title>Networking and Communications</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="https://bootswatch.com/united/bootstrap.css">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
   
   <link rel="stylesheet" type="text/css" href="./style.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.1.1/ekko-lightbox.min.js"></script>
</head>
<body>
   <div id="header"></div>
   <div class="container container-main">
   <div class="row">
      <div class="col-md-8 col-md-offset-2">
         <div class="row">
            <h1>Networking and Communications</h1>
            <p class="lead">
               by <a href="http://github.com/dhruvsaidava">Dhruv Saidava</a>
            </p>
            <hr>
         </div>
         <div class="row">
            <ol class="breadcrumb col-md-6">
               <li class="breadcrumb-item"><a href="/">Home</a>
               </li>
               <li class="breadcrumb-item"><a href="assignments.html">Assignments</a>
               </li>
               <li class="breadcrumb-item"><a href="assignments.html">Week 15</a>
               </li>
            </ol>
         </div>
         <div class="row">
            <hr>
            <a href="#" data-toggle="lightbox" data-title="#" data-footer="">
            <img alt="" class="img-responsive" src="#" title="">
            </a>
         </div>
         <hr>
         <!-- Panel next -->
         <div class="panel-group">
            <div class="panel panel-default">
               <div class="panel-heading">
                  <h4>Fab Academy Tutorials &amp; References</h4>
               </div>
               <div class="panel-body">
                  <p>
                  <ul>
                     <a href="http://academy.cba.mit.edu/classes/networking_communications/index.html" target="_blank">Networking and Communications</a>
                     <hr>
                     <p><a href="http://archive.fabacademy.org/archives/2017/doc/networking-esp8266.html" target="_blank">ESP8266 Introduction</a></p>
                  </ul>
                  </p>                        
               </div>
            </div>
         </div>
         <hr>
         <!-- Panel next -->
         <div class="panel-group">
            <div class="panel panel-default">
               <div class="panel-heading">
                  <h4 class="dark-title">Communication</h4>
               </div>
               <div class="panel-body">
                  <p>
                 Going to use Input & Output Board which I made in past week. <br>

                 <strong>Input Board</strong><br>
                 <br>
                 Input Board is basically for Ultrasonic based distance detection by using Atty Tiny 44. 

               <br>

               <strong>Output Board</strong><br>
                  </p>
                  <p>
                  </p>
               </div>
            </div>
         </div>
         <hr>
         <!-- Panel next -->
         <!-- Panel next -->
         <div class="panel-group">
            <div class="panel panel-default">
               <div class="panel-heading">
                  <h4 class="dark-title">Content</h4>
               </div>
               <div class="panel-body">

<p>For networking and communication , I decided to go for Half-duplex serial communication between an Input and Output devices. Input device was Distance sensor and Output device was RGB led. </p>

<h4>INPUT DEVICE</h4>
<p>
   
With help from Gautam and Mohit, I designed a Distance sensor board. I had earlier designed a distance sensor board in previous week but could not use it for networking since it did not have Rx/Tx for communication.

</p>
<p>
   
<p>
The first step was to design the board in Eagle. I took the old board and added Rx,Tx,VCC and GND pins. Over all the board had following components:
</p>
   <ul>
      
      <li>Attiny 44ssu</li>
      <li>1x6 pin male header for Distance sensor. However I used only 4 pins</li>
      <li>2x3 pin male header for AVRISP</li>
      <li>1x4 pin male header for Rx,Tx,VCC and GND.</li>
      <li>1 micro F capacitor.</li>
   </ul>
</p>
 
<p>Following images show the process I followed. Detailed process of Eagle and milling can be seen in the previous weeks.
</p>

         <img width="48%" src="images/w15x/screenshot%202017-06-24%20152820.jpg">
         <img width="48%" src="images/w15x/screenshot%202017-06-24%20153510.jpg">
         <img width="48%" src="images/w15x/screenshot%202017-06-24%20153522.jpg">
         <img width="48%" src="images/w15x/screenshot%202017-06-24%20153642.jpg">
         <img width="48%" src="images/w15x/screenshot%202017-06-24%20154257.jpg">
         <img width="48%" src="images/w15x/img_20170624_170007.jpg">
         <img width="48%" src="images/w15x/img_20170624_170315.jpg">
       <img width="48%" src="images/w15x/img_20170624_210315-u9095.png">
       <img width="100%" src="images/w15x/whatsapp%20image%202017-06-28%20at%20115127%20am.jpg">

<p> Next I checked if the board was working individually. For this I tried the following codes 
First step was to put Rx,Tx,VCC and GND in the board developed for Input device.
</p>
<br>
<hr>
        <img src="images/w15x/screenshot%202017-06-25%20205230.jpg" width="48%">
        <img src="images/w15x/screenshot%202017-06-25%20224230.jpg" width="48%">
        <img src="images/w15x/screenshot%202017-06-25%20215344.jpg" width="48%">
        <img src="images/w15x/screenshot%202017-06-25%20222903.jpg" width="48%">
        <img src="images/w15x/screenshot%202017-06-25%20224250.jpg" width="48%">


<h4>OUTPUT DEVICE</h4>

<p>For output device, I used the board I made in previous week's assignment, which can be found here.</p>
<p>
   
The code for LED was written to blink in different colours responding to input in the form of "0-1-2".
However, when the code was run later using networking, it did not work. Then I realised that since we are already providing VCC in common pin, we need to give digitalWrite as "low" for the colour that we want to blink.
</p>
<p>Hence, the code was corrected as below.<p>
   <br>
<img src="images/w15x/screenshot%202017-06-28%20035508.jpg" width="100%">
<p>
   Next I used an FTDI cable and connected its Rx,Tx,VCC and GND to the input device board and the networking was established.   
</p>

Next, to add more boards, I decided to add more values from the input device.
The idea was to allow more boards to be connected. For this, one option is to call each board by giving different addresses from the computer, and the next option, which I chose, was to allow the input device to call for different boards and also define the colours of RGB led in the first board.

<img src="images/design.png" width="100%">
<p>
   
My distance sensor code currently gave me values as 0-1-2. Here, value "0" would light up Red colour on the RGB board, "1" would light up Green and "2" would light up blue. So, again I changed the distance sensor code and increased its range to give an additional value "3". This value will give signal to light up the Led on "hello echo" board. Similarly the code can be modified to give additional values and signals can be given to additional boards as and when required.
</p>
<p>Here is how the code looked like</p>
<br>

<img src="images/w15x/screenshot%202017-07-10%20072950.jpg" width="100%">
<p>
I uploaded the code successfully to obtain 0-1-2-3 as values for different range of distances. I checked it on serial monitor first, before attaching the boards to the other board.
</p>

<p>Next step was to write a code for "hell echo" led to light-up when it gets signal "3".
Here is how it looked like.</p>
<img src="images/w15x/scrnsht2.jpg" width="100%">

<p>
Next step was to write a code for "hello echo" led to light-up when it gets signal "3". Here is how it looked like.  The idea was to see the LED light up once you give the value "3" from the computer. Later on when all the boards are connected, this value will come from the input device.
</p>
<p>
   
I checked if the code was working individually. It would give me red, green, blue outputs for 0,1,2 respectively. 
Finally, since all individual codes were uploaded, I connected all 3 boards and FTDI, to check if the connections were working.
</p>
               </div>
            </div>
         </div>
         <hr>

         <div class="panel-group">
            <div class="panel panel-default">
               <div class="panel-heading">
                  <h4 class="dark-title">Files</h4>
               </div>
               <div class="panel-body">
                  <p>
                     <a href="board_distance.png" download >Board Distance image</a><br>
                     <a href="transmittor_distance.brd" download >Transmittor Distance image</a><br>
                     <a href="trialled.ino" download >trialled image</a><br>
                     <a href="border_distance.png" download >Border distance sch</a><br>
                     <a href="transmittor_distance.sch" download >Transmittor distance sch</a><br>
                     <a href="trialtrans.ino" download>trialtrans file</a><br>

                  </p>
               </div>
            </div>
         </div>
         <hr>
         <!-- Panel next -->
         <!-- Footer -->
         <div id="footer" class="container" style="margin-top: 80px"></div>
         <script> 
            $("#header").load("header.html"); 
            $("#footer").load("footer.html"); 
            
         </script>
      </div>
      <!-- Footer -->
   </div>

</html>